apiVersion: v1
kind: Secret
metadata:
  name: {{ include "an.fullname" . }}-config
type: Opaque
stringData:
  "connector.json": |-
    {
      "controller": {
        "mode": "access",
        "url": "https://{{ required "Organization Name required" .Values.connector.organization }}.{{ .Values.connector.url }}",
        "token": {
          "data": {
            "access_token": "{{ required "Access Token required" .Values.connector.accessToken }}",
            "refresh_token": "{{ required "Refresh Token required" .Values.connector.refreshToken }}"
          }
        }
      }
      {{- if .Values.connector.dnsServer }}
      ,"afvpn": {
        "dns": "{{ .Values.connector.dnsServer }}"
      }
      {{- end }}
    }